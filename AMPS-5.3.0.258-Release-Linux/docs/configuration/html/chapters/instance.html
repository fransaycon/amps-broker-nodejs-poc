<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Instance Level Configuration &#8212; Advanced Message Processing System (AMPS) Configuration Guide 5.3.0.255
 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.3.0.255',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Admin Server and Statistics" href="admin.html" />
    <link rel="prev" title="2. Generating a Configuration File" href="generating.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/flag_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Instance Level Configuration</a><ul>
<li><a class="reference internal" href="#sow-statistics-interval">SOW Statistics Interval</a></li>
<li><a class="reference internal" href="#slow-client-policies">Slow Client Policies</a></li>
<li><a class="reference internal" href="#minidump-settings">Minidump Settings</a></li>
<li><a class="reference internal" href="#configuration-validation">Configuration Validation</a></li>
<li><a class="reference internal" href="#tuning">Tuning</a></li>
<li><a class="reference internal" href="#externals">Externals</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="generating.html" title="previous chapter">2. Generating a Configuration File</a></li>
      <li>Next: <a href="admin.html" title="next chapter">4. Admin Server and Statistics</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="instance-level-configuration">
<span id="configref-instance"></span><span id="index-0"></span><h1>3. Instance Level Configuration<a class="headerlink" href="#instance-level-configuration" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes elements of the AMPS configuration that set
parameters for the instance as a whole.</p>
<table border="1" class="docutils" id="table-configref-name-parameters">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Element</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last highlight-default"><div class="highlight"><pre><span></span><span class="n">Name</span>
</pre></div>
</div>
</td>
<td><p class="first">This element defines the name of your AMPS instance. The  instance name
is used to uniquely identify this instance for replication purposes, to
generate file names for use by the AMPS instance, and is shown in log
statements and for other administrative purposes. 60East recommends that
the name be short and meaningful, and that each instance in your AMPS
installation have a distinct name. When creating a name, the name should
not contain special characters such as spaces, path separator characters
(<code class="docutils literal"><span class="pre">/</span></code> or <code class="docutils literal"><span class="pre">\</span></code>), or characters that will be interpreted by the Linux
shell (<code class="docutils literal"><span class="pre">$</span></code> or <code class="docutils literal"><span class="pre">~</span></code>).</p>
<p>60East recommends that the name of the instance stay the same for as long
as the application will be connected to the same replication partners or
retain transaction log data. This name is used in the files
created by the instance as part of the transaction log, in the
replication path for replicated instances, and in the client names
created for replication connections. If your AMPS installation will use
replication, the <code class="docutils literal"><span class="pre">Name</span></code> of each instance <em>must</em> be unique within the
set of replicated instances.</p>
<p class="last">This element is required, and there is no default.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Group</span></code></td>
<td><p class="first">Identifies the replication group for this instance. If no <code class="docutils literal"><span class="pre">Group</span></code>
element is present, the replication group for this instance is set to the
<code class="docutils literal"><span class="pre">Name</span></code> of the instance. Set the group parameter when being able to
refer to a set of instances makes your replication configuration simpler.</p>
<p>Replication passthrough uses the group name to specify which instances to
provide passthrough for. See the <a class="reference external" href="../../../user-guide/html/index.html">AMPS User Guide</a> for a discussion of
replication, including passthrough.</p>
<p class="last">Defaults to the instance <code class="docutils literal"><span class="pre">Name</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ProcessName</span></code></td>
<td><p class="first">Specifies the process name to set for this instance. When this element is
present, AMPS uses the name specified as the process name. Otherwise, the
process name uses the default set by Linux, which is the executable name
(<code class="docutils literal"><span class="pre">ampServer</span></code> or <code class="docutils literal"><span class="pre">ampServer-compat</span></code> unless the executable has been
renamed.)</p>
<p>This element is most useful for systems that host multiple AMPS instances
and want to be able to quickly tell the instances apart based on the
process name.</p>
<p class="last">This element is optional. If not present, the AMPS executable does not
change the process name.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Description</span></code></td>
<td>This element is used to provide a description of the AMPS instance for
monitoring tools (including the AMPS Galvanometer). AMPS provides the
contents of this element in the admin interface, but does not use the
description for any other purpose.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Environment</span></code></td>
<td>This element is used to provide information about the environment of the
AMPS instance to monitoring tools (including the AMPS Galvanometer).
AMPS provides the contents of this element in the admin interface, but
does not use this element for any other purpose.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">RegexTopicSupport</span></code></td>
<td><p class="first">Sets whether this instance supports regular expression topic matching.
When this option is <code class="docutils literal"><span class="pre">true</span></code>, clients can register subscriptions using
regular expressions and receive messages for all matching topics. When
this option is <code class="docutils literal"><span class="pre">false</span></code>, regular expression characters are interpreted
as literal characters.</p>
<p class="last">Defaults to <code class="docutils literal"><span class="pre">true</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Authentication</span></code></td>
<td><p class="first">Sets the default authentication module to use for transports that do not
explicitly specify an authentication module. Authentication modules
verify the identity of a connected user.</p>
<p>The module specified must be one of the modules configured in the
<code class="docutils literal"><span class="pre">Modules</span></code> element or one of the authentication modules that AMPS loads
by default. See
<a class="reference internal" href="authentication.html#configref-auth-modules-default"><span class="std std-ref">Table 12.2</span></a>
for the list of default modules.</p>
<p class="last">Defaults to <code class="docutils literal"><span class="pre">amps-default-authentication-module</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Entitlement</span></code></td>
<td><p class="first">Sets the default entitlement module to use for transports that do not
explicitly specify an entitlement module. Entitlement modules enforce
permissions for a connected user.</p>
<p>The module specified must be one of the modules configured in the
<code class="docutils literal"><span class="pre">Modules</span></code> element or one of the modules that AMPS loads by default. See
<a class="reference internal" href="entitlement.html#configref-entitlement-modules-default"><span class="std std-ref">Table 13.2</span></a>
for the list of default modules.</p>
<p class="last">Defaults to: <code class="docutils literal"><span class="pre">amps-default-entitlement-module</span></code></p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Authenticator</span></code></td>
<td><p class="first">Sets the default authenticator module to use for outgoing connections
from AMPS that do not explicitly specify an authenticator module.
Authenticator modules provide credentials to use for outgoing connections.</p>
<p>The module specified must be one of the modules configured in the
<code class="docutils literal"><span class="pre">Modules</span></code> element or one of hte modules that AMPS loads by default.</p>
<p class="last">Defaults to: <code class="docutils literal"><span class="pre">amps-default-authenticator-module</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">SuggestedMinimumVersion</span></code></td>
<td><p class="first">The suggested minimum AMPS version to use this configuration file. If the
AMPS instance that loads this configuration file has a version number
less than the suggested minimum version, AMPS issues a warning. This
option can be useful when upgrading a set of AMPS instances, or when the
AMPS instance will see improved performance from a particular feature.
For example, an application that will run correctly without hash indexes,
but would see improved performance with hash indexes, could provide a
<code class="docutils literal"><span class="pre">SuggestedMinimumVersion</span></code> of 4.3.1.0.</p>
<p class="last">Defaults: when no value is provided, AMPS does not check the
configuration file against the version number of the instance.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">RequiredMinimumVersion</span></code></td>
<td><p class="first">The required minimum AMPS version to use this configuration file. If the
AMPS instance that loads this configuration file has a version number
less than the suggested minimum version, AMPS issues an error and will
not start. This option can be useful for enforcing upgrade on a set of
AMPS instances, or when the AMPS instance must support a particular
feature. For example, an application that uses message queues could
provide a <code class="docutils literal"><span class="pre">RequiredMinimumVersion</span></code> of 5.0.</p>
<p class="last">Defaults: when no value is provided, AMPS does not check the configuration
file against the version number of the instance.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ConfigIncludeCommentDefault</span></code></td>
<td><p class="first">Sets the default for how <code class="docutils literal"><span class="pre">Include</span></code> directives indicate the source of
the content. When this option is set to <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">enabled</span></code>, content
inserted through an Include directive is surrounded by comments indicating
the source of the content.</p>
<p class="last">Defaults: Defaults to <code class="docutils literal"><span class="pre">false</span></code>, which specifies that AMPS will not
surround included content with comments.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ConfigCycleDetectionThreshold</span></code></td>
<td><p class="first">Sets the maximum size to allow for an expanded configuration file.
This setting is intended to prevent cycles of include files (for
example, where file A includes file B and file B includes file A) from
consuming all of the memory on the system before failing.</p>
<p class="last">Defaults: Defaults to 5MB.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.1:</strong> <em>Instance Level Configuration Parameters</em></p>
<div class="highlight-xml" id="listing-name-example"><div class="highlight"><pre><span></span><span class="nt">&lt;AMPSConfig&gt;</span>
    ....

    <span class="nt">&lt;Name&gt;</span>AMPS<span class="nt">&lt;/Name&gt;</span>
    <span class="nt">&lt;Group&gt;</span>Sample-AMPS<span class="nt">&lt;/Group&gt;</span>

    ....
<span class="nt">&lt;/AMPSConfig&gt;</span>
</pre></div>
</div>
<p><strong>Example 3.1:</strong> <em>Instance-Level Configuration Example</em></p>
<div class="section" id="sow-statistics-interval">
<span id="index-1"></span><h2>SOW Statistics Interval<a class="headerlink" href="#sow-statistics-interval" title="Permalink to this headline">¶</a></h2>
<p>AMPS can publish SOW statistics for each SOW topic which has been
configured. The <code class="docutils literal"><span class="pre">SOWStatsInterval</span></code> is specified as an interval (see
<a class="reference internal" href="basics.html#table-configref-time-units"><span class="std std-ref">Table 3.2</span></a>)
between updates to the <code class="docutils literal"><span class="pre">/AMPS/SOWStats</span></code> topic.</p>
<table border="1" class="docutils" id="table-configref-sow-interval">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Element</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SOWStatsInterval</span></code></td>
<td>Interval for which SOW statistics are
updated.</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.2:</strong> <em>SOW Statistics Interval Parameters</em></p>
<div class="highlight-xml" id="listing-sow-stats-interval"><div class="highlight"><pre><span></span><span class="nt">&lt;AMPSConfig&gt;</span>
    ...

    <span class="nt">&lt;SOWStatsInterval&gt;</span>10s<span class="nt">&lt;/SOWStatsInterval&gt;</span>

    ...
<span class="nt">&lt;/AMPSConfig&gt;</span>
</pre></div>
</div>
<p><strong>Example 3.2:</strong> <em>Sow Statistics Interval Example</em></p>
</div>
<div class="section" id="slow-client-policies">
<span id="index-2"></span><h2>Slow Client Policies<a class="headerlink" href="#slow-client-policies" title="Permalink to this headline">¶</a></h2>
<p>AMPS includes a set of parameters that specify how the instance should
manage slow clients. Sometimes, AMPS can publish messages faster than an
individual client can consume messages, particularly in applications
where the pattern of messages includes &#8220;bursts&#8221; of messages. Clients
that are unable to consume messages faster or equal to the rate messages
are being sent to them are ”slow clients”. By default, AMPS queues
messages for a slow client in memory to grant the slow client the
opportunity to catch up. However, scenarios may arise where a client can
be over-subscribed to the point that the client cannot consume messages
as fast as messages are being sent to it. In particular, this can happen
with the results of a large SOW query, where AMPS generates all of the
messages for the query much faster than the network can transmit the
messages.</p>
<p>Slow client management is one of the ways that AMPS prevents slow
clients from disrupting service to the instance. 60East recommends
enabling slow client management for instances that serve high message
volume or are mission critical. Slow client policies for all Transports
in the instance are set at the root level of the configuration file. A
Transport can override any of these settings, or choose to use the
instance-wide settings. Details on slow client handling are available in
the <a class="reference external" href="../../../user-guide/html/index.html">AMPS User Guide</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Element</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">MessageMemoryLimit</span></code></td>
<td><p class="first">The total amount of memory to
allocate to messages before
offlining clients. This applies to
all clients. For example, setting a
value of <code class="docutils literal"><span class="pre">500MB</span></code> means that all
clients that this limit applies to
will share <code class="docutils literal"><span class="pre">500MB</span></code> for all
buffered messages to those clients.</p>
<p>Default: 10% of total host memory or
10% of the amount of host memory
AMPS is allowed to consume (as
reported by <code class="docutils literal"><span class="pre">ulimit</span> <span class="pre">-m</span></code> ),
whichever is <em>lowest</em>.</p>
<p class="last">This option is specified in bytes,
and accepts the standard AMPS notation
(for example, <code class="docutils literal"><span class="pre">10GB</span></code> or <code class="docutils literal"><span class="pre">250MB</span></code>).</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">MessageDiskLimit</span></code></td>
<td><p class="first">The total amount of disk space to
allocate to messages before
disconnecting clients.</p>
<p>Default: <code class="docutils literal"><span class="pre">1GB</span></code> or the amount
specified in the MessageMemoryLimit,
whichever is <em>highest</em>.</p>
<p class="last">This option is specified in bytes,
and accepts the standard AMPS notation
(for example, <code class="docutils literal"><span class="pre">10GB</span></code> or <code class="docutils literal"><span class="pre">250MB</span></code>).</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">MessageDiskPath</span></code></td>
<td><p class="first">The path to use to write offline
files.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">/var/tmp</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">ClientMessageAgeLimit</span></code></td>
<td><p class="first">The maximum amount of time for the
client to lag behind. If a message
for the client has been held longer
than this time, the client will be
disconnected. This parameter is an
AMPS time interval (for example,
<code class="docutils literal"><span class="pre">30s</span></code> for 30 seconds, or <code class="docutils literal"><span class="pre">1h</span></code>
for 1 hour).</p>
<p class="last">Default: No age limit</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ClientMaxCapacity</span></code></td>
<td><p class="first">The amount of available capacity a
single client can consume. Before a
client is offlined, this limit
applies to the
<code class="docutils literal"><span class="pre">MessageMemoryLimit</span></code>. After a
client is offlined, this limit
includes the <code class="docutils literal"><span class="pre">MessageDiskLimit</span></code>.
This parameter is a percentage of
the total.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">100%</span></code> (no effective
limit)</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.3:</strong> <em>Slow Client Management</em></p>
</div>
<div class="section" id="minidump-settings">
<span id="index-3"></span><h2>Minidump Settings<a class="headerlink" href="#minidump-settings" title="Permalink to this headline">¶</a></h2>
<p>AMPS minidumps contain information on the current state of the AMPS
program execution, which is useful for support and diagnostics. AMPS
will generate a minidump file on any crash event, or a minidump file can
be generated at any point in time through the monitoring interface (see
the <a class="reference external" href="../../../monitoring/html/index.html">AMPS Monitoring Reference Guide</a>).</p>
<p>AMPS allows you to set the directory in which minidump files will be
created and the permissions mask for minidump files.</p>
<table border="1" class="docutils" id="table-configref-mini-dump-dir">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Element</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">MiniDumpDirectory</span></code></td>
<td><p class="first">Location to store AMPS mini dumps. Default is
<code class="docutils literal"><span class="pre">/tmp</span></code>. If the directory does not exist, AMPS
creates the directory.</p>
<p class="last">The special value <code class="docutils literal"><span class="pre">disabled</span></code> configures AMPS not
to produce mini dumps.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">MiniDumpFileMask</span></code></td>
<td><p class="first">Permissions mask for minidump files. The value of
the mask is an octal number (by convention, four
digits) in the same format as the standard <em>umask</em>
command, and AMPS applies this mask exactly as the
<em>umask</em> command would. The file is created with
the user and group that the AMPS server process
runs under.</p>
<p>AMPS accepts a maximum value of <code class="docutils literal"><span class="pre">666</span></code> for the
mask.</p>
<p>For example, here are some common umask settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Result</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">0444</span></code></td>
<td>File is readable by owner, group, and
any user.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">0440</span></code></td>
<td>File is readable by owner and members of
the owner&#8217;s group</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">0400</span></code></td>
<td>File is readable by owner only</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">0664</span></code></td>
<td>File is readable and writable by owner
and members of the owner&#8217;s group. File
is readable by any user.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">0644</span></code></td>
<td>File is readable and writable by owner.
File is readable by members of the
owner&#8217;s group and any user.</td>
</tr>
</tbody>
</table>
<p class="last">Default: <code class="docutils literal"><span class="pre">0640</span></code>, which makes the file readable
and writable by the file owner and readable by
members of the owner&#8217;s group.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.4:</strong> <em>Mini Dump Directory Parameters</em></p>
<div class="highlight-xml" id="listing-minidumpdir"><div class="highlight"><pre><span></span><span class="nt">&lt;AMPSConfig&gt;</span>
    ...

    <span class="nt">&lt;MiniDumpDirectory&gt;</span>/var/tmp<span class="nt">&lt;/MiniDumpDirectory&gt;</span>
    <span class="nt">&lt;MiniDumpFileMask&gt;</span>0644<span class="nt">&lt;/MiniDumpFileMask&gt;</span>

    ...
<span class="nt">&lt;/AMPSConfig&gt;</span>
</pre></div>
</div>
<p><strong>Example 3.3:</strong> <em>MiniDump Configuration Example</em></p>
</div>
<div class="section" id="configuration-validation">
<span id="index-4"></span><h2>Configuration Validation<a class="headerlink" href="#configuration-validation" title="Permalink to this headline">¶</a></h2>
<p>The configuration validation option can be used to enable or disable the
validation checking performed by AMPS on the initialization of each
instance. Disabling the configuration validation can cause AMPS to start
in an invalid state or not properly log warnings or errors in the
configuration file.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="caution" src="../_images/caution.svg" /></td>
<td>Configuration validation should only be disabled during testing
or debugging. We strongly recommend against disabling
configuration validation in a production or development
environment.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<table border="1" class="docutils" id="table-configref-replication-dest">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Element</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">ConfigValidation</span></code></td>
<td><p class="first">Setting this to <code class="docutils literal"><span class="pre">disabled</span></code> will turn off AMPS configuration validation. The
default is <code class="docutils literal"><span class="pre">enabled</span></code>, ensuring that the current AMPS configuration meets valid
parameter ranges and data types.</p>
<p class="last">When this option is set to <code class="docutils literal"><span class="pre">disabled</span></code>, AMPS may start with an inconsistent or
invalid configuration, which may have unpredictable effects.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.5:</strong> <em>Config Validation Parameters</em></p>
<div class="highlight-xml" id="listing-sonfig-validation"><div class="highlight"><pre><span></span><span class="nt">&lt;AMPSConfig&gt;</span>
    <span class="nt">&lt;ConfigValidation&gt;</span>enabled<span class="nt">&lt;/ConfigValidation&gt;</span>
<span class="nt">&lt;/AMPSConfig&gt;</span>
</pre></div>
</div>
<p><strong>Example 3.4:</strong> <em>Configuration Validation Example</em></p>
</div>
<div class="section" id="tuning">
<span id="index-5"></span><h2>Tuning<a class="headerlink" href="#tuning" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">Tuning</span></code> section of the configuration file sets instance-level
parameters for tuning the performance of AMPS. In many cases, AMPS
self-tunes to take advantage of the hardware and environment. However,
explicitly setting tuning parameters is sometimes necessary in cases
where an AMPS instance cannot determine the best value. For example, if
multiple AMPS servers are running on the same system, 60East recommends
disabling NUMA.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><img alt="caution" src="../_images/caution.svg" /></td>
<td>Use the <code class="docutils literal"><span class="pre">Tuning</span></code> element with care.
Options in the <code class="docutils literal"><span class="pre">Tuning</span></code> element can affect AMPS performance,
and the behavior of <code class="docutils literal"><span class="pre">Tuning</span></code> options may be version-specific.</td>
</tr>
</tbody>
</table>
<blockquote>
<div><div class="line-block">
<div class="line"><br /></div>
</div>
</div></blockquote>
<table border="1" class="docutils" id="table-configref-tuning">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Element</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">NUMA/Enabled</span></code></td>
<td><p class="first">Setting this to <code class="docutils literal"><span class="pre">disabled</span></code> will turn off AMPS NUMA
tuning. The default is <code class="docutils literal"><span class="pre">enabled</span></code>, which affinitizes
certain AMPS threads to specific processors.</p>
<p>The default value of <code class="docutils literal"><span class="pre">enabled</span></code> produces
significantly better performance when a single
instance of AMPS is running on a given system.
However, if multiple instances of AMPS are running on
the same system, setting this value to <code class="docutils literal"><span class="pre">disabled</span></code>
for all of the instances on the system can reduce
contention among the instances and produce better
overall performance.</p>
<p>This option can also be set by setting the
<code class="docutils literal"><span class="pre">AMPS_NUMA</span></code> environment variable.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">enabled</span></code></p>
</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.6:</strong> <em>Tuning Parameters</em></p>
<div class="highlight-xml" id="listing-tuning"><div class="highlight"><pre><span></span><span class="nt">&lt;AMPSConfig&gt;</span>
    <span class="nt">&lt;Tuning&gt;</span>
        <span class="nt">&lt;NUMA&gt;</span>
            <span class="nt">&lt;Enabled&gt;</span>enabled<span class="nt">&lt;/Enabled&gt;</span>
        <span class="nt">&lt;/NUMA&gt;</span>
    <span class="nt">&lt;/Tuning&gt;</span>
<span class="nt">&lt;/AMPSConfig&gt;</span>
</pre></div>
</div>
<p><strong>Example 3.5:</strong> <em>Tuning Example</em></p>
</div>
<div class="section" id="externals">
<span id="index-6"></span><h2>Externals<a class="headerlink" href="#externals" title="Permalink to this headline">¶</a></h2>
<p>The AMPS server depends on external libraries for some functionality.
The Externals configuration item allows you to control the exact shared
object loaded for some of these external libraries, particularly those
related to security.</p>
<table border="1" class="docutils" id="table-configref-externals">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Element</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">SSL/Library</span></code></td>
<td><p class="first">The path and shared object name of the SSL library to
use for this instance. AMPS requires an SSL library
that is compatible with OpenSSL 1.0.2 or later. By
default, AMPS specifies the object name, and uses the
standard shared object loading mechanism to resolve
the object name. With this configuration option, you
can direct AMPS to load a specific shared object.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">libopenssl.so</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">Crypto/Library</span></code></td>
<td><p class="first">The path and shared object name of the cryptography
library. By default, AMPS specifies the object name,
and uses the standard shared object loading mechanism
to resolve the object name. With this configuration
option, you can direct AMPS to load a specific shared
object.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">libcrypto.so</span></code></p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">Curl/Library</span></code></td>
<td><p class="first">The path and shared object name of the <code class="docutils literal"><span class="pre">libcurl</span></code>
shared object. By default, AMPS specifies the object
name and loads the version of libcurl included with
the AMPS distribution as necessary. With this
configuration item, you can direct AMPS to load a
specific shared object.</p>
<p class="last">Default: <code class="docutils literal"><span class="pre">libcurl.so</span></code></p>
</td>
</tr>
</tbody>
</table>
<p><strong>Table 3.7:</strong> <em>Externals Parameters</em></p>
<div class="highlight-xml" id="listing-externals"><div class="highlight"><pre><span></span><span class="nt">&lt;AMPSConfig&gt;</span>
    <span class="nt">&lt;Externals&gt;</span>
        <span class="nt">&lt;SSL&gt;</span>
            <span class="nt">&lt;Library&gt;</span>/opt/audited/libopenssl.so<span class="nt">&lt;/Library&gt;</span>
        <span class="nt">&lt;/SSL&gt;</span>
        <span class="nt">&lt;Crypto&gt;</span>
            <span class="nt">&lt;Library&gt;</span>/opt/audited/libcrypto.so<span class="nt">&lt;/Library&gt;</span>
        <span class="nt">&lt;/Crypto&gt;</span>
        <span class="nt">&lt;Curl&gt;</span>
            <span class="nt">&lt;Library&gt;</span>/opt/resolver/lib/libcurl.so<span class="nt">&lt;/Library&gt;</span>
        <span class="nt">&lt;/Curl&gt;</span>
    <span class="nt">&lt;/Externals&gt;</span>
<span class="nt">&lt;/AMPSConfig&gt;</span>
</pre></div>
</div>
<p><strong>Example 3.6:</strong> <em>Externals Example</em></p>
</div>
</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019, 60East Technologies, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>